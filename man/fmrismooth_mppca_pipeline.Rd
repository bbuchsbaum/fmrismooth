% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pipeline.R
\name{fmrismooth_mppca_pipeline}
\alias{fmrismooth_mppca_pipeline}
\title{fmrismooth_mppca_pipeline: MP-PCA denoising followed by bilateral filtering}
\usage{
fmrismooth_mppca_pipeline(
  vec,
  t1 = NULL,
  probs = NULL,
  mask = NULL,
  design = NULL,
  motion = NULL,
  sigma_mode = c("patch", "global", "fixed"),
  sigma_value = NULL,
  sigma_sp = 2.5,
  sigma_t = 0.5,
  sigma_r = 15,
  sigma_d = 1,
  lattice_blur_iters = 1L
)
}
\arguments{
\item{vec}{4D fMRI array or `NeuroVec`.}

\item{t1}{Optional 3D structural guide.}

\item{probs}{Optional list of 3D guides (e.g., tissue probabilities).}

\item{mask}{Optional 3D logical/0-1 mask.}

\item{design}{Optional per-frame design regressor.}

\item{motion}{Optional per-frame motion matrix used by some stages.}

\item{sigma_mode}{MP-PCA noise mode: 'patch', 'global', or 'fixed'.}

\item{sigma_value}{Noise sigma when `sigma_mode='fixed'`.}

\item{sigma_sp}{Spatial sigma (voxels) for joint bilateral.}

\item{sigma_t}{Temporal sigma (frames) for joint bilateral.}

\item{sigma_r}{Range sigma(s) for joint bilateral guidance.}

\item{sigma_d}{Sigma for design regressor feature.}

\item{lattice_blur_iters}{Number of lattice blur iterations.}
}
\value{
Smoothed 4D data, wrapped like `vec` when possible.
}
\description{
Denoises 4D fMRI with MP-PCA in overlapping patches, then applies a
joint-bilateral lattice filter with optional guides.
}
